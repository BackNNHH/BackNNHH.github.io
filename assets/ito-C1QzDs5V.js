const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mediaMesh-l7Q3ZlIx.js","assets/styled-components.browser.esm-DF6RYU2E.js"])))=>i.map(i=>d[i]);
import{r as w,f as K,d as v,l as H,m as Y,j as t,R as J,a as W}from"./styled-components.browser.esm-DF6RYU2E.js";const q="modulepreload",X=function(m){return"/"+m},B={},Q=function(y,c,h){let i=Promise.resolve();if(c&&c.length>0){let $=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),D=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=$(c.map(d=>{if(d=X(d),d in B)return;B[d]=!0;const p=d.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const a=document.createElement("link");if(a.rel=p?"stylesheet":q,p||(a.as="script"),a.crossOrigin="",a.href=d,D&&a.setAttribute("nonce",D),document.head.appendChild(a),p)return new Promise((x,k)=>{a.addEventListener("load",x),a.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function g($){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=$,window.dispatchEvent(l),!l.defaultPrevented)throw $}return i.then($=>{for(const l of $||[])l.status==="rejected"&&g(l.reason);return y().catch(g)})};async function A(m,y){const c=new Image;await new Promise((n,o)=>{c.onload=()=>n(),c.onerror=C=>o(new Error(`Không thể load ảnh: ${C}`)),c.src=URL.createObjectURL(m)}),URL.revokeObjectURL(c.src);const h=c.width,i=c.height,g=document.createElement("canvas");g.width=h,g.height=i;const $=g.getContext("2d",{willReadFrequently:!0});if(!$)throw new Error("Không thể lấy context 2D của canvas");$.drawImage(c,0,0);const D=$.getImageData(0,0,h,i).data,d=new Map;for(let n=0;n<i;n++)for(let o=0;o<h;o++){const C=(n*h+o)*4+3,e=D[C];d.set(`${o},${n}`,e>128)}const p=(n,o)=>n<0||n>=h||o<0||o>=i?!1:d.get(`${n},${o}`)||!1,f=[],a=[],x=[],{modelDepth:k}=y;for(let n=0;n<i;n++)for(let o=0;o<h;o++){if(!p(o,n))continue;const C=i-1-n,e=o-h/2,s=C-i/2,b=k/2,M=[[e,s,-b],[e+1,s,-b],[e+1,s+1,-b],[e,s+1,-b],[e,s,b],[e+1,s,b],[e+1,s+1,b],[e,s+1,b]],F=o/h,L=(o+1)/h,P=(i-1-n)/i,O=(i-n)/i,_=[[F,P],[L,P],[L,O],[F,O]],z=(o+.5)/h,V=(i-n-.5)/i,G=[z,V],r=f.length+1,j=a.length+1;f.push(...M),a.push(..._);const u=a.length+1;a.push(G),x.push(`f ${r+0}/${j+0} ${r+3}/${j+3} ${r+2}/${j+2} ${r+1}/${j+1}`),x.push(`f ${r+4}/${j+0} ${r+5}/${j+1} ${r+6}/${j+2} ${r+7}/${j+3}`),p(o,n-1)||x.push(`f ${r+3}/${u} ${r+7}/${u} ${r+6}/${u} ${r+2}/${u}`),p(o,n+1)||x.push(`f ${r+0}/${u} ${r+1}/${u} ${r+5}/${u} ${r+4}/${u}`),p(o-1,n)||x.push(`f ${r+4}/${u} ${r+7}/${u} ${r+3}/${u} ${r+0}/${u}`),p(o+1,n)||x.push(`f ${r+1}/${u} ${r+2}/${u} ${r+6}/${u} ${r+5}/${u}`)}const I=m.name.split(".").slice(0,-1).join(".")||"model",S=`${I}.obj`,R=`${I}.mtl`,E=["# Generated by SAYGEX App",`mtllib ${R}`,...f.map(n=>`v ${n[0].toFixed(4)} ${n[1].toFixed(4)} ${n[2].toFixed(4)}`),...a.map(n=>`vt ${n[0].toFixed(4)} ${n[1].toFixed(4)}`),"usemtl item_material","s off",...x].join(`
`),U=[`# Material file for ${I}`,"newmtl item_material",`map_Kd ${m.name}`].join(`
`);return{objContent:E,mtlContent:U,outputObjFile:S,outputMtlFile:R}}const Z=w.lazy(()=>Q(()=>import("./mediaMesh-l7Q3ZlIx.js"),__vite__mapDeps([0,1])).then(m=>({default:m.ModelViewer}))),ee=K`
  body {
    background-color: #121212;
    color: #E0E0E0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    height: 100%;
  }
`,te=v.div({background:"#1e1e1e",borderRadius:"16px",padding:"2.5rem",width:"100%",maxWidth:"700px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)",border:"1px solid #333",display:"flex",flexDirection:"column",gap:"2rem"}),ne=v.header({textAlign:"center",borderBottom:"1px solid #333",paddingBottom:"1.5rem",h1:{fontSize:"2.5rem",margin:0,background:"-webkit-linear-gradient(45deg, #ff7b00, #ffc700)","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"},p:{marginTop:"0.5rem",color:"#a0a0a0",fontSize:"1.1rem"}}),oe=v.div({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem","@media (max-width: 600px)":{"grid-template-columns":"1fr"}}),re=v.div({display:"flex",flexDirection:"column",gap:"1.5rem"}),ae=v.div`
    border: 2px dashed #444;
    border-radius: 12px;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    &:hover {
        border-color: #ff7b00;
        background-color: #252525;
    }

    i {
        font-size: 48px;
        color: #ff7b00;
        margin-bottom: 1rem;
        transition: transform 0.2s ease-in-out;
    }

    p {
        margin: 0;
        color: #b0b0b0;
    }

    ${m=>m.isDragging&&H`
            border-color: #ffc700;
            background-color: #2a2a2a;
            transform: scale(1.02);

            i {
                transform: scale(1.1);
            }
        `}
`,ie=v.div({label:{display:"block",marginBottom:"0.5rem",color:"#c0c0c0",fontWeight:"500"},"input[type='number']":{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #444",backgroundColor:"#252525",color:"#e0e0e0",fontSize:"1rem",boxSizing:"border-box","&:focus":{outline:"none",borderColor:"#ff7b00",boxShadow:"0 0 0 3px rgba(255, 123, 0, 0.3)"}}}),T=Y`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,se=v.button`
    background: linear-gradient(45deg, #ff7b00, #ffa800);
    color: #121212;
    font-weight: bold;
    font-size: 1.1rem;
    border: none;
    border-radius: 8px;
    padding: 1rem;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.75rem;

    &:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 123, 0, 0.3);
    }

    &:disabled {
        background: #555;
        color: #888;
        cursor: not-allowed;
    }

    .spinner {
        animation: ${T} 1s linear infinite;
    }
`,le=v.div`
    background-color: #252525;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 280px;
    border: 1px solid #333;
    position: relative;
    overflow: hidden;

    .placeholder-text {
        color: #a0a0a0;
        font-weight: 500;
        text-align: center;
    }
    .preview-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        color: #a0a0a0;
        .spinner {
            font-size: 48px;
            color: #ff7b00;
            animation: ${T} 1.5s linear infinite;
        }
    }
    img.preview-2d-main {
        max-height: 200px;
        image-rendering: pixelated;
    }

    img.preview-2d-overlay {
        position: absolute;
        bottom: 10px;
        right: 10px;
        max-width: 64px;
        max-height: 64px;
        border-radius: 4px;
        image-rendering: pixelated;
        background: url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><rect width="8" height="8" x="0" y="0" fill="%23444"/><rect width="8" height="8" x="8" y="8" fill="%23444"/><rect width="8" height="8" x="8" y="0" fill="%23333"/><rect width="8" height="8" x="0" y="8" fill="%23333"/></svg>');
        border: 1px solid #555;
        z-index: 10;
    }
`,ce=v.p({backgroundColor:" rgba(255, 82, 82, 0.1)",color:"#ff9a9a",border:"1px solid #ff5252",borderRadius:"8px",padding:"1rem",textAlign:"center"});function N(m,y,c){const h=new Blob([m],{type:c}),i=URL.createObjectURL(h),g=document.createElement("a");g.href=i,g.download=y,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(i)}function de(){const[m,y]=w.useState(null),[c,h]=w.useState(null),[i,g]=w.useState(1),[$,l]=w.useState(null),[D,d]=w.useState(!1),[p,f]=w.useState(!1),[a,x]=w.useState(null),k=w.useRef(null),I=async e=>{if(e)if(e&&e.type.startsWith("image/")){y(e),x(null),l(null),f(!0);const s=new FileReader;s.onloadend=()=>h(s.result),s.readAsDataURL(e);try{const b=await A(e,{modelDepth:i});x(b)}catch(b){console.error("Lỗi khi tự động xử lý preview:",b),l(b instanceof Error?b.message:"Không thể tạo bản xem trước."),x(null)}finally{f(!1)}}else l("File không hợp lệ. Vui lòng chọn một file ảnh.")},S=async e=>{if(g(e),!!m){f(!0),l(null);try{const s=await A(m,{modelDepth:e});x(s)}catch(s){l("Lỗi khi cập nhật độ dày."+s)}finally{f(!1)}}},R=()=>{if(!a){l("Không có dữ liệu model để tải về.");return}N(a.objContent,a.outputObjFile,"text/plain"),N(a.mtlContent,a.outputMtlFile,"text/plain")},E=e=>{var s;I((s=e.target.files)==null?void 0:s[0])},U=()=>{var e;(e=k.current)==null||e.click()},n=e=>{e.preventDefault(),e.stopPropagation(),d(!0)},o=e=>{e.preventDefault(),e.stopPropagation(),d(!1)},C=e=>{var s;e.preventDefault(),e.stopPropagation(),d(!1),I((s=e.dataTransfer.files)==null?void 0:s[0])};return t.jsxs(t.Fragment,{children:[t.jsx(ee,{}),t.jsxs(te,{children:[t.jsxs(ne,{children:[t.jsx("h1",{children:"Image to OBJ"}),t.jsx("p",{children:"Turn your pixel Image into 3D model instantly (if the photo is not too big)"}),t.jsx("p",{children:"This tool can help you create simple Minecraft item models to add to other engines(eg: Unity, Blender...)"}),t.jsx("b",{children:"TẠI VÌ ÉO CÓ AI LÀM VỪA Ý TUI NÊN TUI MỚI NGHIÊN CỨU VÀ TẠO RA CÔNG CỤ NÀY!"})]}),t.jsxs(oe,{children:[t.jsxs(re,{children:[t.jsx("input",{type:"file",ref:k,onChange:E,accept:"image/png, image/jpeg, image/gif",style:{display:"none"}}),t.jsxs(ae,{onClick:U,onDragOver:n,onDragLeave:o,onDrop:C,isDragging:D,children:[t.jsx("i",{className:"ri-upload-cloud-2-line"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Click to select image"}),t.jsx("br",{}),"or drag and drop here"]})]}),t.jsxs(ie,{children:[t.jsx("label",{htmlFor:"depth-input",children:"Model Thickness:"}),t.jsx("input",{id:"depth-input",type:"number",value:i,onBlur:e=>S(parseFloat(e.target.value)),onChange:e=>g(parseFloat(e.target.value)),step:"0.1",disabled:p})]})]}),t.jsx(le,{children:p?t.jsxs("div",{className:"preview-loader",children:[t.jsx("i",{className:"ri-loader-4-line spinner"}),t.jsx("span",{children:"Creating preview..."})]}):a&&c?t.jsxs(t.Fragment,{children:[t.jsx(Z,{objContent:a.objContent,textureUrl:c}),t.jsx("img",{src:c,alt:"2D Preview",className:"preview-2d-overlay"})]}):t.jsx("p",{className:"placeholder-text",children:"Preview 3D model here"})})]}),t.jsxs(se,{onClick:R,disabled:!a||p,children:[t.jsx("i",{className:"ri-download-2-line"}),t.jsx("span",{children:"Download .OBJ & .MTL files"})]}),$&&t.jsx(ce,{children:$}),t.jsx("p",{children:"APP BY BACKNNHH"})]}),t.jsx("div",{style:{color:"#1e1e1e"},children:t.jsx("p",{children:"PNG to OBJ, pixel to OBJ"})})]})}J.createRoot(document.getElementById("root")).render(t.jsx(W.StrictMode,{children:t.jsx(de,{})}));
